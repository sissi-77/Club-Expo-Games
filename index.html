<!DOCTYPE html>
<html lang="zh-TW">
<head>
<meta charset="UTF-8">
<title>資研社駭客挑戰</title>
<style>
@import url('https://fonts.googleapis.com/css2?family=Share+Tech+Mono&display=swap');
body {
    font-family: 'Share Tech Mono', monospace;
    background: #050d1a;
    color: #00f5ff;
    margin: 0;
    padding: 0;
    overflow-x: hidden;
}
h1, h2, p {
    text-align: center;
}
.container {
    max-width: 900px;
    margin: auto;
    padding: 30px;
    font-size: 20px;
}
button {
    background-color: #00f5ff;
    color: #050d1a;
    border: none;
    padding: 12px 25px;
    font-size: 20px;
    cursor: pointer;
    font-family: 'Share Tech Mono', monospace;
    margin-top: 20px;
    border-radius: 8px;
}
button:hover {
    background-color: #00c2cc;
}
.stage {
    display: none;
    margin-top: 30px;
}
input {
    padding: 8px;
    font-size: 20px;
    margin-top: 15px;
    width: 70%;
}
a {
    color: #ff66ff;
    font-size: 22px;
}
.explanation {
    margin-top: 12px;
    color: #ff3333;
    font-size: 18px;
}
.typing {
    overflow: hidden;
    border-right: .15em solid #00f5ff;
    white-space: nowrap;
    animation: typing 3s steps(40, end), blink-caret .75s step-end infinite;
}
@keyframes typing { from { width: 0 } to { width: 100% } }
@keyframes blink-caret { from, to { border-color: transparent } 50% { border-color: #00f5ff; } }
#matrixCanvas {
    position: fixed;
    top:0; left:0;
    width:100%; height:100%;
    z-index:-1;
    background: rgba(5,13,26,0.95);
}
.question-box {
    background: rgba(0, 245, 255, 0.1);
    border: 1px solid #00f5ff;
    border-radius: 10px;
    padding: 15px;
    margin: 20px auto;
    width: 80%;
    line-height: 1.8em;
}
.question-box code {
    color: #ff66ff;
    font-size: 22px;
}
</style>
</head>
<body>

<canvas id="matrixCanvas"></canvas>

<div class="cover" id="cover" style="height:100vh;display:flex;flex-direction:column;justify-content:center;align-items:center;">
    <h1 class="typing">CYGSH IRC 資研社駭客挑戰</h1>
    <button onclick="startChallenge()">準備開始吧！</button>
</div>

<div class="container">
    <!-- 第一關 -->
    <div id="stage1" class="stage">
        <p class="typing">第一關：聽說密碼藏在這個網頁的原始碼裡！快去找找看。</p>
        <!-- 密碼是: MjAyNTA4MjY= -->
        <input type="text" id="answer1" placeholder="輸入密碼">
        <button onclick="checkAnswer(1)">提交</button>
        <p class="explanation" id="exp1"></p>
    </div>

    <!-- 第二關 -->
    <div id="stage2" class="stage">
        <p class="typing">第二關：這是一位同學的公開個人資料，猜猜看他的密碼是什麼吧！</p>
<pre>
Name: Vicky
Birthday: 2007-05-19
</pre>
        <input type="text" id="answer2" placeholder="輸入密碼">
        <button onclick="checkAnswer(2)">提交</button>
        <p class="explanation" id="exp2"></p>
    </div>

    <!-- 第三關 -->
    <div id="stage3" class="stage">
        <p class="typing">第三關：哪一個才是安全的網站？</p>
        <ul>
            <li><a href="#" onclick="chooseLink(false,'這個網址雖然看起來很像是bank-secure.com，但其實真正的主網域是後面的evil.com，所以這個網址是假的，用來釣魚的！')">http://login.bank-secure.com.evil.com</a></li>
            <li><a href="#" onclick="chooseLink(true)">https://bank-secure.com/login</a></li>
            <li><a href="#" onclick="chooseLink(false,'真正的網域是fake.org，前面的bank-secure-login.com是子網域，所以這個網址是假的！')">https://bank-secure-login.com.fake.org</a></li>
        </ul>
        <p class="explanation" id="exp3"></p>
    </div>

    <!-- 第四關 -->
    <div id="stage4" class="stage">
        <p class="typing">第四關：二進位轉十進位！</p>
        <div class="question-box">
            <p><strong>題目：</strong> <code>101101</code></p>
            <p><strong>概念：</strong> 十進位是逢十進一，那麼二進位就是逢二進一。</p>
            <p><strong>提示：</strong><br>
               十進位：個位數 = 10⁰，十位數 = 10¹<br>
               二進位：最右邊 = 2⁰，右邊數來第二位 = 2¹，以此類推</p>
        </div>
        <input type="text" id="answer4" placeholder="輸入數字">
        <button onclick="checkAnswer(4)">提交</button>
        <p class="explanation" id="exp4"></p>
    </div>

    <!-- 第五關 -->
    <div id="stage5" class="stage">
        <p class="typing">最後一關：請輸入我們社團的 IG 帳號</p>
        <input type="text" id="answer5" placeholder="輸入帳號">
        <button onclick="checkAnswer(5)">提交</button>
        <p class="explanation" id="exp5"></p>
    </div>

    <!-- 結尾 -->
    <div id="final" class="stage" style="text-align:center;">
        <h2>🎉 恭喜破關！ 🎉</h2>
        <p>FLAG{you_have_a_gift_to_receive}</p>
        <p>追蹤我們 IG：<strong>cygsh_irc_12</strong></p>
    </div>
</div>

<script>
function startChallenge() {
    document.getElementById("cover").style.display = "none";
    document.getElementById("stage1").style.display = "block";
}
function checkAnswer(stage) {
    let ans = document.getElementById("answer" + stage).value.trim();
    let correct = false;
    if(stage === 1 && ans === "MjAyNTA4MjY=") correct = true;
    if(stage === 2 && ans === "Vicky20070519") correct = true;
    if(stage === 4 && ans === "45") correct = true;
    if(stage === 5 && ans === "cygsh_irc_12") correct = true;

    if(correct) {
        document.getElementById("exp" + stage).textContent = getExplanation(stage);
        setTimeout(function() {
            document.getElementById("stage" + stage).style.display = "none";
            if(stage < 5) {
                document.getElementById("stage" + (stage + 1)).style.display = "block";
            } else {
                document.getElementById("final").style.display = "block";
            }
        }, 3000);
    } else {
        alert("答案不正確，再試一次！");
    }
}
function chooseLink(correct, reason="") {
    if(correct) {
        document.getElementById("exp3").textContent = getExplanation(3);
        setTimeout(function() {
            document.getElementById("stage3").style.display = "none";
            document.getElementById("stage4").style.display = "block";
        }, 3000);
    } else {
        document.getElementById("exp3").textContent = "錯誤！" + reason;
    }
}
function getExplanation(stage) {
    if(stage === 1) return "千萬不要把密碼直接寫在原始碼中！";
    if(stage === 2) return "弱密碼(像是名字+生日)非常容易被猜中。";
    if(stage === 3) return "選擇正確的網址很重要，要檢查網域是否正確要看「最後一個.前面的部分+最後一個字串」，才能避免被釣魚網站騙取資料。";
    if(stage === 4) return "101101(二進位) = 45(十進位)。公式就是把每個位數依序乘上 2 的次方再加總。";
    if(stage === 5) return "感謝挑戰！歡迎加入資研社！";
    return "";
}

// 背景動畫
const canvas = document.getElementById("matrixCanvas");
const ctx = canvas.getContext("2d");
canvas.height = window.innerHeight;
canvas.width = window.innerWidth;
const letters = "01";
const fontSize = 14;
const columns = canvas.width / fontSize;
const drops = Array(Math.floor(columns)).fill(1);

function draw() {
    ctx.fillStyle = "rgba(5, 13, 26, 0.2)"; 
    ctx.fillRect(0, 0, canvas.width, canvas.height);
    ctx.fillStyle = "#00ddee";
    ctx.font = fontSize + "px monospace";
    for (let i = 0; i < drops.length; i++) {
        const text = letters.charAt(Math.floor(Math.random() * letters.length));
        ctx.fillText(text, i * fontSize, drops[i] * fontSize);
        if (drops[i] * fontSize > canvas.height && Math.random() > 0.975) {
            drops[i] = 0;
        }
        drops[i]++;
    }
}
setInterval(draw, 35);
</script>
</body>
</html>
